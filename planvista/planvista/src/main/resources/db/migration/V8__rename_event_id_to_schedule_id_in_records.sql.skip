-- V8: recordsテーブルのevent_idをschedule_idに変更
-- 目的: eventsテーブルがschedulesテーブルに統合されたため、参照先を変更

-- ステップ1: event_idカラムをschedule_idにリネーム
ALTER TABLE records
CHANGE COLUMN event_id schedule_id BIGINT DEFAULT NULL
COMMENT 'スケジュールID（どのスケジュールの実績記録か）';

-- ステップ2: インデックスの追加（パフォーマンス向上のため）
ALTER TABLE records
ADD INDEX idx_schedule_id (schedule_id);

-- ステップ3: コメントを更新
ALTER TABLE records COMMENT = '作業記録テーブル（実際の作業実績を記録）';